<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Joke & GIF Generator</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 flex items-center justify-center p-6">
  <div class="bg-gray-900 text-white rounded-2xl shadow-2xl p-8 w-full max-w-lg text-center">
    <h1 class="text-3xl font-bold mb-4">Joke Generator</h1>
    
    
    <div class="flex gap-4 justify-center">
      <button id="getSetup" class="bg-yellow-500 hover:bg-yellow-600 text-black px-6 py-3 rounded-xl font-bold transition">
        Get Joke Setup
      </button>
      <button id="getPunchline" class="bg-green-500 hover:bg-green-600 text-black px-6 py-3 rounded-xl font-bold transition" disabled>
        Show Punchline
      </button>
    </div>

    <div id="setupBox" class="mt-6 text-xl font-semibold text-gray-200"></div>
    <div id="punchlineBox" class="mt-4 text-lg text-yellow-300"></div>
    <div class="mt-6">
      <img id="gifBox" class="rounded-xl shadow-md mx-auto max-h-64 hidden" alt="Funny GIF" />
    </div>
  </div>

  <script>
    const setupBox = document.getElementById("setupBox");
    const punchlineBox = document.getElementById("punchlineBox");
    const gifBox = document.getElementById("gifBox");
    const btnSetup = document.getElementById("getSetup");
    const btnPunchline = document.getElementById("getPunchline");

    const GIPHY_API_KEY = "JFHOilypTStQ8qno5UAGKGe3ETCgp09u"; 
    let currentJoke = null;

    async function getSetup() {
      try {
        
        punchlineBox.textContent = "";
        gifBox.classList.add("hidden");
        btnPunchline.disabled = true;

        
        const jokeRes = await fetch("https://official-joke-api.appspot.com/random_joke");
        const jokeData = await jokeRes.json();
        currentJoke = jokeData;

        setupBox.textContent = jokeData.setup;
        btnPunchline.disabled = false;
      } catch (err) {
        setupBox.textContent = "Failed to fetch joke. Try again!";
        console.error(err);
      }
    }

    async function showPunchline() {
      if (!currentJoke) return;
      punchlineBox.textContent = currentJoke.punchline;

      try {
        
        const gifRes = await fetch(`https://api.giphy.com/v1/gifs/random?api_key=${GIPHY_API_KEY}&tag=funny&rating=g`);
        const gifData = await gifRes.json();
        gifBox.src = gifData.data.images.original.url;
        gifBox.classList.remove("hidden");
      } catch (err) {
        gifBox.classList.add("hidden");
        console.error(err);
      }
    }

    btnSetup.addEventListener("click", getSetup);
    btnPunchline.addEventListener("click", showPunchline);
  </script>
</body>
</html>
